# Copy to ".env" (or pass via your shell) before running docker compose.

# Host ports (left side of mappings)
WEB_HOST_PORT=5173
API_HOST_PORT=5141
MARKETDATA_HOST_PORT=8001
REDIS_HOST_PORT=6379
REDISINSIGHT_HOST_PORT=5540
POSTGRES_HOST_PORT=5432

# Container ports (the apps read these via $PORT)
WEB_CONTAINER_PORT=8080
API_CONTAINER_PORT=5141
MARKETDATA_CONTAINER_PORT=8001

# Backend (Postgres) - Local Docker
# For local development with docker-compose, use service name 'postgres'
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=WealthTracker
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
# Local Docker Postgres doesn't enable TLS by default, so Prefer/Disable is recommended.
POSTGRES_SSL_MODE=Prefer
POSTGRES_TRUST_SERVER_CERTIFICATE=false

# Example for Neon (uncomment and fill in your values):
# - Go to Neon Dashboard > Connection Details
# - Use the pooled connection string (ep-xxx-pooler.xxx.neon.tech) for serverless environments
# - Neon docs typically use sslmode=require (encryption without strict cert validation).
#   If you want strict validation, use POSTGRES_SSL_MODE=VerifyFull and keep Trust Server Certificate=false.
# POSTGRES_HOST=ep-xxx-pooler.ap-southeast-2.aws.neon.tech
# POSTGRES_PORT=5432
# POSTGRES_DB=neondb
# POSTGRES_USER=neondb_owner
# POSTGRES_PASSWORD=your_neon_password
# POSTGRES_SSL_MODE=Require
# POSTGRES_TRUST_SERVER_CERTIFICATE=false

# Backend (JWT)
JWT_ISSUER=WealthTracker
JWT_AUDIENCE=WealthTrackerApi
JWT_ACCESS_TOKEN_EXP_MINUTES=60
JWT_REFRESH_TOKEN_EXP_DAYS=7
JWT_RSA_PRIVATE_KEY_PATH=/app/keys/private.pem
JWT_RSA_PUBLIC_KEY_PATH=/app/keys/public.pem

# Google OAuth (both backend + frontend)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:5173/auth/callback

# Frontend runtime config
API_BASE_URL=http://localhost:5141/api

# Market data service
REDIS_URL=redis://redis:6379/0
CACHE_TTL_SECONDS=300
# Keep old scan results around longer so the UI can render immediately on cold start
# (stale-while-revalidate). This is the hard eviction TTL; "freshness" is still controlled
# by `CACHE_TTL_SECONDS`.
CACHE_STALE_TTL_SECONDS=86400
SERVE_STALE_WHILE_REVALIDATE=1
STALE_RETRY_AFTER_MS=15000

# Upstash Redis (remote) - REST option (uses `upstash-redis` Python SDK):
# If these are set, MarketDataService will use Upstash REST and ignore `REDIS_URL`.
# UPSTASH_REDIS_REST_URL=https://YOUR_UPSTASH_REST_HOST
# UPSTASH_REDIS_REST_TOKEN=YOUR_UPSTASH_REST_TOKEN

# Upstash Redis (remote) - Redis protocol option (uses `redis` Python client):
# REDIS_URL=rediss://default:YOUR_PASSWORD@YOUR_HOST.upstash.io:6379

# API behavior
MIGRATE_ON_STARTUP=1
